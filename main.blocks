<xml xmlns="https://developers.google.com/blockly/xml"><block type="pxt-on-start" id="3ckSM`ZCTO_W+u6u/fu9" x="0" y="0"><statement name="HANDLER"><block type="typescript_statement" id="!GGx*i$q~#^h-Ga`m,WA" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="namespace weatherSensors {" line1="    export let AHT20_I2C_ADDR = 0x38; // Dirección I2C del AHT20" line2="    export let BMP280_I2C_ADDR = 0x76; // Dirección I2C del BMP280" line3="    export let seaLevelhPa: number = 101325; // Presión estándar al nivel del mar en Pascales" line4="" line5="    // Variables de estado para verificar si los sensores están inicializados" line6="    export let isAHT20Initialized = false;" line7="    export let isBMP280Initialized = false;" line8="" line9="    // Exportar las funciones de inicialización para hacerlas accesibles fuera del namespace" line10="    export function initAHT20() {" line11="        if (!isAHT20Initialized) {" line12="            let initCmd = pins.createBuffer(3);" line13="            initCmd[0] = 0xE1; // Comando de inicialización" line14="            initCmd[1] = 0x08;" line15="            initCmd[2] = 0x00;" line16="            pins.i2cWriteBuffer(AHT20_I2C_ADDR, initCmd, false);" line17="            basic.pause(10); // Espera para que el sensor se estabilice" line18="            isAHT20Initialized = true;" line19="        }" line20="    }" line21="" line22="    export function initBMP280() {" line23="        if (!isBMP280Initialized) {" line24="            let ctrlMeas = pins.createBuffer(2);" line25="            ctrlMeas[0] = 0xF4; // Dirección del registro de control de medición" line26="            ctrlMeas[1] = 0x27; // 00100111: modo normal, oversampling x1 para presión y temperatura" line27="            pins.i2cWriteBuffer(BMP280_I2C_ADDR, ctrlMeas, false);" line28="" line29="            let config = pins.createBuffer(2);" line30="            config[0] = 0xF5; // Dirección del registro de configuración" line31="            config[1] = 0xA0; // 10100000: filtro off, standby time 1000 ms" line32="            pins.i2cWriteBuffer(BMP280_I2C_ADDR, config, false);" line33="" line34="            basic.pause(100); // Espera para que el sensor se estabilice" line35="            isBMP280Initialized = true;" line36="        }" line37="    }" line38="}" numlines="39"></mutation></block></statement></block></xml>